function getXMLHttpRequest() {

	var xhr = null;
	
	if(window.XMLHttpRequest || window.ActiveXObject) {
		if(window.ActiveXObject) {
			try {
				xhr = new ActiveXObject("Msxml2.XMLHTTP");
			} 
			catch(e) {
				xhr = new ActiveXObject("Microsoft.XMLHTTP");
			}
		} 
		else {
			xhr = new XMLHttpRequest();
		}
	} 
	else {
		alert("Votre navigateur ne supporte pas l'objet XMLHTTPRequest...");
		return null;
	}
	return xhr;
}

function deleteFiles() {
  // On utilise l'objet XMLHttpRequest pour transmettre la liste des fichiersà effacer à PHP, via la variable $_POST.
    
	
	//var xmlhttp = new XMLHttpRequest(); // On crée une instance de l'objet
	//xmlhttp.open("GET", "scripts p/logout.php", true); // On ouvre la connexion vers le script php
    //xmlhttp.send();// On envoie la requête et le script php est exécuté.
    //document.getElementById("logout").innerHTML=""; // On trouve l'élément html qui contient le lien
    //de déconnexion et on supprime le contenu de la balise en question. De la sorte on enlève le lien de la page.

	// création du tableau contenant la sélection
	//
	// si tableau vide, exit
	//
	//
	//var zone = document.getElementById("maZone");
	//var element = zone.firstChild;
	//while( element!=null ){
    //	(...)
    // 	element = element.nextSibling;
	//}


	// tu crée l'objet :
	var xhr = getXMLHttpRequest();
	if(xhr && xhr.readyState != 0){
	     xhr.abort();
	}
	    
	xhr.onreadystatechange = function(){
		if(xhr.readyState == 4 && (xhr.status == 200 || xhr.status == 0)){
    		// tu peux récupérer en JS le résultat du traitement avec xhr.responseText;
			//document.getElementById("endroit-ou-placer-la-suite").innerHTML = xhr.responseText;
	   	}	
   		else if(xhr.readyState == 2 || xhr.readyState == 3){ // traitement non fini
    		// tu peux mettre un message ou un gif de chargement par exemple
    	}
    }
    xhr.open("POST", "jsRouter.php?action=deletefiles", true); // true pour asynchrone
    xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"); // seulement si t'as choisi la méthode POST !
	xhr.send("var="+varJS); // éventuellement t'envois plusieurs variables s
}
